version: 0.1.0-{build}
image: Visual Studio 2017
environment:
  PY_DIR: C:/Python3.6
  matrix:
  - GENERATOR: '"Visual Studio 15 2017"'
    BUILD_TYPE: Release
    
init:
- cmd: set PATH=%PY_DIR%;%PY_DIR%\Scripts;%PATH%
- git config --global core.autocrlf true
install:
- git submodule update --init --recursive
build_script:
- cmd: >-
    mkdir build

    cd build

    cmake .. -G %GENERATOR% -DCMAKE_BUILD_TYPE=%BUILD_TYPE%

    cmake --build . --config %BUILD_TYPE%

artifacts:
  - path: build/src/Release/ddraw.dll

test: off
